import telebot
import config
import random

from telebot import types


def main():
    bot = telebot.TeleBot(config.TOKEN)

    @bot.message_handler(commands=['start'])
    def welcome(message):
        sti = open('static/welcome.webp', 'rb')

        # keyboard
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)
        item1 = types.KeyboardButton("üòä –ö–∞–∫ –¥–µ–ª–∞?")
        item2 = types.KeyboardButton("–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É?")

        markup.add(item1, item2)

        bot.send_message(message.chat.id,
                         "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, {0.first_name}!\n–Ø - <b>{1.first_name}</b>, –±–æ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã–π —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å–º—ã—Å–ª–∞ –∂–∏–∑–Ω–∏ —Å–æ–∑–¥–∞—Ç–µ–ª—é.".format(
                             message.from_user, bot.get_me()),
                         parse_mode='html', reply_markup=markup)

    @bot.message_handler(content_types=['text'])
    def lalala(message):
        if message.chat.type == 'private':
            if message.text == '–•–æ—á–µ—à—å —É–∑–Ω–∞—Ç—å –ø–æ–≥–æ–¥—É?':
                bot.send_message(message.chat.id, str(random.randint(0, 100)))
            elif message.text == 'üòä –ö–∞–∫ –¥–µ–ª–∞?':
                markup = types.InlineKeyboardMarkup(row_width=2)
                item1 = types.InlineKeyboardButton("–•–æ—Ä–æ—à–æ", callback_data='good')
                item2 = types.InlineKeyboardButton("–ù–µ –æ—á–µ–Ω—å", callback_data='bad')

                markup.add(item1, item2)

                bot.send_message(message.chat.id, '–û—Ç–ª–∏—á–Ω–æ, —Å–∞–º –∫–∞–∫?', reply_markup=markup)
            else:
                bot.send_message(message.chat.id, '–Ø –Ω–µ –∑–Ω–∞—é —á—Ç–æ –æ—Ç–≤–µ—Ç–∏—Ç—å üò¢')

    bot.polling(none_stop=True)


if __name__ == '__main__':
    main()
